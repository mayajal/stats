(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[273],{285:(e,r,s)=>{"use strict";s.d(r,{$:()=>o});var l=s(5155),t=s(2115),a=s(9708),n=s(2085),d=s(9434);let i=(0,n.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=t.forwardRef((e,r)=>{let{className:s,variant:t,size:n,asChild:o=!1,...c}=e,u=o?a.DX:"button";return(0,l.jsx)(u,{className:(0,d.cn)(i({variant:t,size:n,className:s})),ref:r,...c})});o.displayName="Button"},594:(e,r,s)=>{"use strict";s.d(r,{A:()=>l});let l=(0,s(157).A)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},1469:(e,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),!function(e,r){for(var s in r)Object.defineProperty(e,s,{enumerable:!0,get:r[s]})}(r,{default:function(){return i},getImageProps:function(){return d}});let l=s(8229),t=s(8883),a=s(3063),n=l._(s(1193));function d(e){let{props:r}=(0,t.getImgProps)(e,{defaultLoader:n.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,s]of Object.entries(r))void 0===s&&delete r[e];return{props:r}}let i=a.Image},2383:()=>{},2523:(e,r,s)=>{"use strict";s.d(r,{p:()=>n});var l=s(5155),t=s(2115),a=s(9434);let n=t.forwardRef((e,r)=>{let{className:s,type:t,...n}=e;return(0,l.jsx)("input",{type:t,className:(0,a.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:r,...n})});n.displayName="Input"},3686:()=>{},4477:(e,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),!function(e,r){for(var s in r)Object.defineProperty(e,s,{enumerable:!0,get:r[s]})}(r,{callServer:function(){return l.callServer},createServerReference:function(){return a},findSourceMapURL:function(){return t.findSourceMapURL}});let l=s(3806),t=s(1818),a=s(4979).createServerReference},4601:(e,r,s)=>{"use strict";s.d(r,{A:()=>l});let l=(0,s(157).A)("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]])},5223:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>g});var l=s(5155),t=s(2115),a=s(6874),n=s.n(a),d=s(6766),i=s(285),o=s(6695),c=s(2523),u=s(5263),m=s(6923),b=s(594),x=s(4601),h=s(3925),p=s(4477);let f=(0,p.createServerReference)("40c97768726835eb6303c93fb3edc7bea7f930e73f",p.callServer,void 0,p.findSourceMapURL,"generateRbdAnalysisSummary");function g(){let[e,r]=(0,t.useState)(null),[s,a]=(0,t.useState)([]),[p,g]=(0,t.useState)(!1),[j,v]=(0,t.useState)(""),[y,N]=(0,t.useState)([]),[w,S]=(0,t.useState)(0),[_,k]=(0,t.useState)(""),[R,A]=(0,t.useState)(!1),[C,O]=(0,t.useState)(""),[P,B]=(0,t.useState)(""),[F,M]=(0,t.useState)(""),[D,E]=(0,t.useState)(""),[T,Z]=(0,t.useState)(""),[I,q]=(0,t.useState)(""),[z,L]=(0,t.useState)([]),[V,W]=(0,t.useState)(null),[H,$]=(0,t.useState)(""),[J,U]=(0,t.useState)(!1),[Q,G]=(0,t.useState)(!1),[X,K]=(0,t.useState)({}),[Y,ee]=(0,t.useState)(!1),[er,es]=(0,t.useState)(!1),el=(0,t.useRef)(null),[et,ea]=(0,t.useState)(null),en=(0,t.useRef)(null);(0,t.useEffect)(()=>{V&&V.plots&&console.log("rbdResults.plots:",V.plots)},[V]);let ed=e=>{let r=[...e.matchAll(/Q\(['"]([^\'\"]*)['"]\)/g)];if(r.length>0)return[...new Set(r.map(e=>e[1]))].join(":");let s=e.match(/^C\((.+)\)$/);return s?s[1]:e},ei=(e,r)=>{try{if("string"==typeof e&&e.includes("<table")){let r=new DOMParser().parseFromString(e,"text/html").querySelector("table");if(r){let e=Array.from(r.querySelectorAll("th")).map(e=>{var r;return(null==(r=e.textContent)?void 0:r.trim())||""}),s=Array.from(r.querySelectorAll("tbody tr")).map(e=>Array.from(e.querySelectorAll("td, th")).map(e=>{var r;return(null==(r=e.textContent)?void 0:r.trim())||""}));if(e.length>0||s.length>0)return(0,l.jsx)("div",{className:"overflow-x-auto mb-6",children:(0,l.jsxs)("table",{className:"w-full border-collapse border border-blue-300",children:[(0,l.jsx)("thead",{className:"bg-blue-50",children:(0,l.jsx)("tr",{className:"bg-blue-50",children:e.map((e,r)=>(0,l.jsx)("th",{className:"border border-blue-300 px-4 py-2 text-left",children:e},"".concat(e,"-").concat(r)))})}),(0,l.jsx)("tbody",{children:s.map((e,r)=>(0,l.jsx)("tr",{children:e.map((e,s)=>(0,l.jsx)("td",{className:"border border-blue-300 px-4 py-2",children:e},"".concat(r,"-").concat(s)))},r))})]})})}}let s=JSON.parse(e);if(!1===r&&Array.isArray(s)&&(s=s.map(e=>e.hasOwnProperty("Significance")?{...e,Significance:"NaN"}:e)),Array.isArray(s)&&s.length>0){let e=Object.keys(s[0]),r=[...s].sort((r,s)=>{let l=r[e[0]],t=s[e[0]];return"string"==typeof l&&"string"==typeof t?l.localeCompare(t):"number"==typeof l&&"number"==typeof t?l-t:String(l).localeCompare(String(t))});return(0,l.jsx)("div",{className:"overflow-x-auto mb-6",children:(0,l.jsxs)("table",{className:"w-full border-collapse border border-blue-300",children:[(0,l.jsx)("thead",{className:"bg-blue-50",children:(0,l.jsx)("tr",{className:"bg-blue-50",children:e.map(e=>(0,l.jsx)("th",{className:"border border-blue-300 px-4 py-2 text-left",children:e},e))})}),(0,l.jsx)("tbody",{children:r.map((r,s)=>(0,l.jsx)("tr",{children:e.map(e=>(0,l.jsx)("td",{className:"border border-blue-300 px-4 py-2",children:"reject"===e||isNaN(Number(r[e]))||null===r[e]||""===String(r[e]).trim()?String(r[e]):Number(r[e]).toFixed(2)},"".concat(s,"-").concat(e)))},s))})]})})}let t=Object.keys(s);if(t.length>0&&"object"==typeof s[t[0]]&&null!==s[t[0]]&&!Array.isArray(s[t[0]])){let e=Object.keys(s[t[0]]);return(0,l.jsx)("div",{className:"overflow-x-auto mb-6",children:(0,l.jsxs)("table",{className:"w-full border-collapse border border-blue-300",children:[(0,l.jsx)("thead",{className:"bg-blue-50",children:(0,l.jsxs)("tr",{className:"bg-blue-50",children:[(0,l.jsx)("th",{className:"border border-blue-300 px-4 py-2 text-left"}),t.map(e=>(0,l.jsx)("th",{className:"border border-blue-300 px-4 py-2 text-left",children:e},e))]})}),(0,l.jsx)("tbody",{children:e.map(e=>(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{className:"border border-blue-300 px-4 py-2 font-medium",children:e}),t.map(r=>(0,l.jsx)("td",{className:"border border-blue-300 px-4 py-2",children:isNaN(Number(s[r][e]))||null===s[r][e]||""===String(s[r][e]).trim()?String(s[r][e]):Number(s[r][e]).toFixed(2)},"".concat(e,"-").concat(r)))]},e))})]})})}throw Error("JSON data is not in a recognized table format.")}catch(r){return(0,l.jsx)("div",{className:"overflow-x-auto bg-blue-50 p-4 rounded-md mb-6",dangerouslySetInnerHTML:{__html:e}})}},eo=async()=>{if(!e)return void v("Please select a file first");g(!0),v("");try{let r=await e.arrayBuffer(),s=h.LF(r),l=s.SheetNames[0],t=s.Sheets[l],n=h.Wp.sheet_to_json(t,{defval:null});if(0===n.length)return void v("No data found in the file");let d=0;n.forEach(e=>{Object.values(e).forEach(e=>{(null==e||""===e)&&d++})}),S(d),a(n),N(Object.keys(n[0]||{}))}catch(e){v("Error processing file. Please ensure it's a valid Excel file.")}finally{g(!1)}},ec=async()=>{if(!e||!P||!F||!D||T&&!I)return void $("Please select a file and specify all required column names, and a response variable if a response variable column is selected.");let r=s;if(T&&I&&0===(r=s.filter(e=>{var r;return(null==(r=e[T])?void 0:r.toString())===I})).length)return void $("No data found for selected response variable: ".concat(I));U(!0),$(""),W(null),ee(!1),ea(30),en.current=setInterval(()=>{ea(e=>e?e-1:null)},1e3);let l=new FormData;l.append("data",JSON.stringify(r)),l.append("block_col",P),l.append("factor_col",F),l.append("response_col",D);let t="https://rbd-service-737809041422.us-central1.run.app/rbd/analyze";if(!t){$("RBD service URL not configured"),U(!1);return}try{let e=new AbortController,r=setTimeout(()=>e.abort(),3e4),s=await fetch(t,{method:"POST",body:l,signal:e.signal});if(clearTimeout(r),!s.ok){let e=await s.json();throw Error(e.error||"Analysis failed")}let a=await s.json();if(W(a),ee(!0),a.anova_table)try{let e=JSON.parse(a.anova_table),r={},s=e["PR(>F)"];s&&Object.keys(s).forEach(e=>{let l=s[e];r[ed(e)]=l<.05}),K(r)}catch(e){console.error("Could not parse anova_table to determine significance",e),K({})}}catch(e){"AbortError"===e.name?$("Request timed out. Please try again."):$(e.message||"An unexpected error occurred")}finally{U(!1),en.current&&clearInterval(en.current),ea(null)}},eu=async()=>{if(!V)return void O("Please run the RBD analysis first.");A(!0),O(""),k("");try{let e={anova_table:V.anova_table,tukey_results:JSON.stringify(V.tukey_results),shapiro:V.shapiro,mean_separation_results:JSON.stringify(V.mean_separation_results),f_oneway_results:V.f_oneway_results,overall_cv:V.overall_cv,cd_value:V.cd_value},r=await f(e);k(r)}catch(e){O(e.message||"Failed to generate AI summary.")}finally{A(!1)}};return(0,l.jsx)("div",{className:"min-h-screen bg-background p-4",children:(0,l.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,l.jsxs)("div",{className:"text-center mb-8",children:[(0,l.jsxs)("div",{className:"flex items-center justify-center mb-4",children:[(0,l.jsx)(u.A,{className:"h-8 w-8 text-blue-600 mr-3"}),(0,l.jsx)("h1",{className:"text-3xl font-bold",children:"RCBD Analysis"})]}),(0,l.jsx)("p",{className:"text-muted-foreground",children:"Upload your Excel file and perform Randomized Complete Block Design (RCBD) analysis."})]}),(0,l.jsxs)(o.Zp,{className:"mb-8 border border-blue-200 rounded-lg",children:[(0,l.jsxs)(o.aR,{children:[(0,l.jsxs)(o.ZB,{className:"flex items-center",children:[(0,l.jsx)(m.A,{className:"h-5 w-5 mr-2"}),"Upload Data File"]}),(0,l.jsx)(o.BT,{children:"Select an Excel (.xlsx) file containing your data (up to 5 MB)"})]}),(0,l.jsxs)(o.Wu,{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"text-sm",children:["Before uploading check out the required data format.",(0,l.jsx)(n(),{href:"/data_arrangement",passHref:!0,children:(0,l.jsx)(i.$,{variant:"link",className:"p-1 h-auto ml-1, text-blue-600 hover:underline",children:"Read this to prepare your data."})})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,l.jsx)(c.p,{type:"file",accept:".xlsx,.xls",onChange:e=>{var s;let l=null==(s=e.target.files)?void 0:s[0];l&&(r(l),v(""),a([]),W(null))},className:"flex-1 bg-blue-50",ref:el}),(0,l.jsx)(i.$,{onClick:eo,disabled:!e||p,className:"min-w-[120px]",children:p?"Processing...":"Process File"}),(0,l.jsx)(i.$,{onClick:()=>{r(null),a([]),v(""),B(""),M(""),E(""),Z(""),q(""),L([]),W(null),$(""),U(!1),K({}),ee(!1),es(!1),k(""),O(""),A(!1),S(0),el.current&&(el.current.value="")},variant:"outline",disabled:!e&&0===s.length&&!V,className:"min-w-[120px]",children:"Reset"})]}),e&&(0,l.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Selected file: ",e.name]}),j&&(0,l.jsx)("div",{className:"text-red-600 text-sm bg-red-50 p-3 rounded",children:j})]})]}),s.length>0&&(0,l.jsxs)(o.Zp,{className:"mb-8 border border-blue-200 rounded-lg",children:[(0,l.jsxs)(o.aR,{children:[(0,l.jsx)(o.ZB,{children:"Data Preview"}),(0,l.jsx)(o.BT,{children:"First 5 rows of the uploaded data."})]}),(0,l.jsxs)(o.Wu,{children:[(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)("table",{className:"min-w-full divide-y divide-blue-200",children:[(0,l.jsx)("thead",{className:"bg-blue-50",children:(0,l.jsx)("tr",{children:Object.keys(s[0]||{}).map(e=>(0,l.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:e},e))})}),(0,l.jsx)("tbody",{className:"bg-white divide-y divide-blue-200",children:s.slice(0,5).map((e,r)=>(0,l.jsx)("tr",{children:Object.values(e).map((e,r)=>(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:"number"==typeof e?e.toFixed(2):null==e?void 0:e.toString()},r))},r))})]})}),(0,l.jsxs)("div",{className:"mt-4 text-sm text-muted-foreground",children:["Total rows: ",s.length]}),w>0&&(0,l.jsxs)("div",{className:"mt-2 text-sm text-yellow-600",children:["Warning: Found ",w," missing value(s) in your data. Rows with missing values will be excluded from the analysis."]})]})]}),s.length>0&&(0,l.jsxs)(o.Zp,{className:"mb-8 border border-blue-200 rounded-lg",children:[(0,l.jsxs)(o.aR,{children:[(0,l.jsx)(o.ZB,{children:"RCBD Analysis Setup"}),(0,l.jsx)(o.BT,{children:"Specify the columns for the analysis."})]}),(0,l.jsxs)(o.Wu,{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block mb-1 font-medium",children:"Block Column (eg. replication)"}),(0,l.jsxs)("select",{value:P,onChange:e=>B(e.target.value),className:"block w-full p-2 border border-blue-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[(0,l.jsx)("option",{value:"",children:"Select a column"}),y.map(e=>(0,l.jsx)("option",{value:e,children:e},e))]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block mb-1 font-medium",children:"Factor Column (eg, treatment)"}),(0,l.jsxs)("select",{value:F,onChange:e=>M(e.target.value),className:"block w-full p-2 border border-blue-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[(0,l.jsx)("option",{value:"",children:"Select a column"}),y.map(e=>(0,l.jsx)("option",{value:e,children:e},e))]})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block mb-1 font-medium",children:"Response Variable Column (Optional)"}),(0,l.jsxs)("select",{value:T,onChange:e=>{Z(e.target.value),q(""),e.target.value?L([...new Set(s.map(r=>r[e.target.value]))].map(String)):L([])},className:"block w-full p-2 border border-blue-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[(0,l.jsx)("option",{value:"",children:"Select a column for response variable"}),y.map(e=>(0,l.jsx)("option",{value:e,children:e},e))]})]}),T&&(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block mb-1 font-medium",children:"Select Response Variable "}),(0,l.jsxs)("select",{value:I,onChange:e=>q(e.target.value),className:"block w-full p-2 border border-blue-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[(0,l.jsx)("option",{value:"",children:"Select a variable"}),z.map(e=>(0,l.jsx)("option",{value:e,children:e},e))]})]})]}),(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block mb-1 font-medium",children:"Response Value Column (eg. yield)"}),(0,l.jsxs)("select",{value:D,onChange:e=>E(e.target.value),className:"block w-full p-2 border border-blue-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[(0,l.jsx)("option",{value:"",children:"Select a column"}),y.map(e=>(0,l.jsx)("option",{value:e,children:e},e))]})]})})]}),(0,l.jsxs)("div",{className:"px-6 pb-6",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-4",children:[" ",(0,l.jsx)(i.$,{onClick:ec,disabled:J||!P||!F||!D||T&&!I,children:J?"Running Analysis... (".concat(et,"s)"):"Run RCBD Analysis"}),Y&&!J&&(0,l.jsxs)("div",{className:"text-blue-600 text-sm bg-blue-50 p-3 rounded",children:[" ","Analysis over. Results are below."]})]}),H&&(0,l.jsx)("div",{className:"text-red-600 text-sm bg-red-50 p-3 rounded mt-4",children:H})]})]}),V&&(0,l.jsxs)(o.Zp,{className:"mb-8 border border-blue-200 rounded-lg",children:[(0,l.jsx)(o.aR,{children:(0,l.jsx)(o.ZB,{children:"Diagnostic Plots and Normality Test"})}),(0,l.jsxs)(o.Wu,{children:[(0,l.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Diagnostic Plots"}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[V.plots.residuals_vs_fitted&&(0,l.jsxs)("div",{className:"border p-2 rounded-md",children:[(0,l.jsx)("h4",{className:"text-md font-medium mb-1",children:"Residuals vs Fitted"}),(0,l.jsx)(d.default,{src:"data:image/png;base64,".concat(V.plots.residuals_vs_fitted),alt:"Residuals vs Fitted Plot",width:500,height:300,className:"w-full h-auto"})]}),V.plots.qq_plot&&(0,l.jsxs)("div",{className:"border p-2 rounded-md",children:[(0,l.jsx)("h4",{className:"text-md font-medium mb-1",children:"Normal Q-Q Plot"}),(0,l.jsx)(d.default,{src:"data:image/png;base64,".concat(V.plots.qq_plot),alt:"Normal Q-Q Plot",width:500,height:300,className:"w-full h-auto"})]})]}),(0,l.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Shapiro-Wilk Test for Normality of Residuals"}),V.shapiro&&(0,l.jsxs)("div",{className:"bg-blue-50 p-4 rounded-md mb-6",children:[(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"Statistic:"})," ",V.shapiro.stat.toFixed(4)]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"P-value:"})," ",V.shapiro.p.toFixed(4)]}),(0,l.jsx)("p",{className:"text-sm text-muted-foreground mt-2",children:V.shapiro.p<.05?"Residuals are likely not normally distributed (p < 0.05).":"Residuals appear to be normally distributed (p >= 0.05)."})]})]})]}),V&&(0,l.jsxs)(o.Zp,{className:"mb-8 border border-blue-200 rounded-lg",children:[(0,l.jsxs)(o.aR,{className:"flex flex-row items-center justify-between",children:[(0,l.jsx)(o.ZB,{children:"RCBD Analysis Results"}),(0,l.jsxs)(i.$,{variant:"outline",size:"sm",onClick:()=>es(!er),children:[er?"Hide":"Show"," Raw JSON"]})]}),er&&(0,l.jsx)(o.Wu,{children:(0,l.jsx)("pre",{className:"p-4 bg-gray-100 rounded-md overflow-x-auto",children:JSON.stringify(V,null,2)})}),(0,l.jsxs)(o.Wu,{children:[(0,l.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"ANOVA Table"}),(0,l.jsx)("div",{className:"overflow-x-auto mb-6",children:V.anova_table&&(()=>{try{let e=JSON.parse(V.anova_table),r=Object.keys(e),s=r.length>0?Object.keys(e[r[0]]).length:0;if(0===s)return(0,l.jsxs)("p",{children:["ANOVA table is empty or could not be parsed. Raw data: ",V.anova_table]});return(0,l.jsxs)("table",{className:"w-full border-collapse border border-blue-300",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{className:"bg-blue-50",children:[(0,l.jsx)("th",{className:"border border-blue-300 px-4 py-2 text-left",children:"Source of error"}),r.map((e,r)=>(0,l.jsx)("th",{className:"border border-blue-300 px-4 py-2 text-left",children:e},r)),(0,l.jsx)("th",{className:"border border-blue-300 px-4 py-2 text-left",children:"Significance (alpha=0.05)"})]})}),(0,l.jsx)("tbody",{children:Object.keys(e[r[0]]).map(s=>{var t;let a=null==(t=e["PR(>F)"])?void 0:t[s];return(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{className:"border border-blue-300 px-4 py-2 font-medium",children:ed(s)}),r.map((r,t)=>(0,l.jsx)("td",{className:"border border-blue-300 px-4 py-2",children:e[r][s]},t)),(0,l.jsx)("td",{className:"border border-blue-300 px-4 py-2",children:null!=a?a<.05?"Significant":"Not significant":""})]},s)})})]})}catch(e){return console.error("Error parsing ANOVA table:",e),(0,l.jsxs)("p",{children:["Error loading ANOVA table. Raw data: ",V.anova_table]})}})()}),null!==V.overall_cv&&void 0!==V.overall_cv&&(0,l.jsxs)("div",{className:"text-left text-sm text-muted-foreground mb-5",children:["Overall CV (%): ",V.overall_cv.toFixed(2)]}),(0,l.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Tukey HSD Post-Hoc Tests"}),V.tukey_results&&Object.keys(V.tukey_results).map(e=>(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsxs)("h4",{className:"text-md font-medium mb-1",children:["Factor: ",ed(e)]}),ei(V.tukey_results[e])]},e)),V.tukey_explanation&&(0,l.jsxs)("div",{children:[(0,l.jsxs)(i.$,{onClick:()=>G(!Q),variant:"link",children:[(0,l.jsx)(b.A,{className:"h-4 w-4 mr-2"}),Q?"Hide":"Show"," Explanation of the Post-hoc table"]}),Q&&(0,l.jsx)("div",{className:"prose prose-sm max-w-none mt-2",dangerouslySetInnerHTML:{__html:V.tukey_explanation}})]}),(0,l.jsx)("h3",{className:"text-lg font-semibold my-4",children:"Mean Separation Results"}),V.mean_separation_results&&Object.keys(V.mean_separation_results).map(e=>{let r=ed(e);return(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsxs)("h4",{className:"text-md font-medium mb-1",children:["Factor: ",r]}),ei(V.mean_separation_results[e],X[r])]},e)}),null!==V.cd_value&&void 0!==V.cd_value&&(0,l.jsxs)("div",{className:"text-left text-sm text-muted-foreground mb-5",children:["Critical Difference (CD): ",V.cd_value.toFixed(2)]}),(0,l.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Mean Plots"}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[V.plots.mean_bar_plot&&(0,l.jsxs)("div",{className:"border p-2 rounded-md",children:[(0,l.jsx)("h4",{className:"text-md font-medium mb-1",children:"Bar Plot"}),(0,l.jsx)(d.default,{src:"data:image/png;base64,".concat(V.plots.mean_bar_plot),alt:"Bar Plot",width:500,height:300,className:"w-full h-auto"})]}),V.plots.mean_box_plot&&(0,l.jsxs)("div",{className:"border p-2 rounded-md",children:[(0,l.jsx)("h4",{className:"text-md font-medium mb-1",children:"Box Plot"}),(0,l.jsx)(d.default,{src:"data:image/png;base64,".concat(V.plots.mean_box_plot),alt:"Box Plot",width:500,height:300,className:"w-full h-auto"})]})]})]})]}),V&&(0,l.jsxs)(o.Zp,{className:"mb-8 border border-blue-200 rounded-lg",children:[(0,l.jsx)(o.aR,{children:(0,l.jsx)(o.ZB,{children:"AI-Powered Summary"})}),(0,l.jsxs)(o.Wu,{children:[(0,l.jsxs)(i.$,{onClick:eu,disabled:R,children:[(0,l.jsx)(x.A,{className:"h-4 w-4 mr-2"}),R?"Generating Summary...":"Generate AI Summary"]}),C&&(0,l.jsx)("div",{className:"text-red-600 text-sm bg-red-50 p-3 rounded mt-4",children:C}),_&&(0,l.jsx)("div",{className:"prose prose-sm max-w-none mt-4",dangerouslySetInnerHTML:{__html:_.replace(/\n/g,"<br />")}})]}),(0,l.jsx)(o.Wu,{children:(0,l.jsx)(i.$,{disabled:!0,children:"Generate Report"})})]})]})})}},5263:(e,r,s)=>{"use strict";s.d(r,{A:()=>l});let l=(0,s(157).A)("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},6695:(e,r,s)=>{"use strict";s.d(r,{BT:()=>o,Wu:()=>c,ZB:()=>i,Zp:()=>n,aR:()=>d});var l=s(5155),t=s(2115),a=s(9434);let n=t.forwardRef((e,r)=>{let{className:s,...t}=e;return(0,l.jsx)("div",{ref:r,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...t})});n.displayName="Card";let d=t.forwardRef((e,r)=>{let{className:s,...t}=e;return(0,l.jsx)("div",{ref:r,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",s),...t})});d.displayName="CardHeader";let i=t.forwardRef((e,r)=>{let{className:s,...t}=e;return(0,l.jsx)("h3",{ref:r,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",s),...t})});i.displayName="CardTitle";let o=t.forwardRef((e,r)=>{let{className:s,...t}=e;return(0,l.jsx)("p",{ref:r,className:(0,a.cn)("text-sm text-muted-foreground",s),...t})});o.displayName="CardDescription";let c=t.forwardRef((e,r)=>{let{className:s,...t}=e;return(0,l.jsx)("div",{ref:r,className:(0,a.cn)("p-6 pt-0",s),...t})});c.displayName="CardContent",t.forwardRef((e,r)=>{let{className:s,...t}=e;return(0,l.jsx)("div",{ref:r,className:(0,a.cn)("flex items-center p-6 pt-0",s),...t})}).displayName="CardFooter"},6766:(e,r,s)=>{"use strict";s.d(r,{default:()=>t.a});var l=s(1469),t=s.n(l)},6923:(e,r,s)=>{"use strict";s.d(r,{A:()=>l});let l=(0,s(157).A)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},9007:(e,r,s)=>{Promise.resolve().then(s.bind(s,5223))},9434:(e,r,s)=>{"use strict";s.d(r,{cn:()=>a});var l=s(2596),t=s(9688);function a(){for(var e=arguments.length,r=Array(e),s=0;s<e;s++)r[s]=arguments[s];return(0,t.QP)((0,l.$)(r))}}},e=>{var r=r=>e(e.s=r);e.O(0,[524,668,874,63,441,684,358],()=>r(9007)),_N_E=e.O()}]);