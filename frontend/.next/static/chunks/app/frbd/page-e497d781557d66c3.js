(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[653],{285:(e,r,s)=>{"use strict";s.d(r,{$:()=>i});var t=s(5155),a=s(2115),l=s(9708),n=s(2085),d=s(9434);let o=(0,n.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),i=a.forwardRef((e,r)=>{let{className:s,variant:a,size:n,asChild:i=!1,...c}=e,m=i?l.DX:"button";return(0,t.jsx)(m,{className:(0,d.cn)(o({variant:a,size:n,className:s})),ref:r,...c})});i.displayName="Button"},1001:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>b});var t=s(5155),a=s(2115),l=s(6874),n=s.n(l),d=s(6766),o=s(285),i=s(6695),c=s(2523),m=s(5263),u=s(6923),x=s(4601),h=s(3925),p=s(4477);let f=(0,p.createServerReference)("40ef146b262430372e00e489675a858cd70768c14f",p.callServer,void 0,p.findSourceMapURL,"generateFrbdAnalysisSummary");function b(){let[e,r]=(0,a.useState)(null),[s,l]=(0,a.useState)([]),[p,b]=(0,a.useState)(!1),[g,j]=(0,a.useState)(""),[v,y]=(0,a.useState)([]),[N,w]=(0,a.useState)(0),[_,S]=(0,a.useState)(""),[k,R]=(0,a.useState)(""),[A,C]=(0,a.useState)(""),[F,O]=(0,a.useState)(""),[P,B]=(0,a.useState)(null),[M,D]=(0,a.useState)(""),[T,E]=(0,a.useState)(!1),[Z,q]=(0,a.useState)(!1),[z,W]=(0,a.useState)(!1),I=(0,a.useRef)(null),[L,H]=(0,a.useState)(null),$=(0,a.useRef)(null),[V,U]=(0,a.useState)(""),[J,Q]=(0,a.useState)(!1),[G,X]=(0,a.useState)("");(0,a.useEffect)(()=>{P&&P.plots&&console.log("frbdResults.plots:",P.plots)},[P]);let K=e=>{let r=[...e.matchAll(/Q\(['"]([^'\"]*)['"]\)/g)];if(r.length>0)return[...new Set(r.map(e=>e[1]))].join(":");let s=e.match(/^C\((.+)\)$/);return s?s[1]:e},Y=e=>!!e&&"string"==typeof e&&e.length<13981013.333333334,ee=(e,r)=>{try{if("string"==typeof e&&e.includes("<table")){let r=new DOMParser().parseFromString(e,"text/html").querySelector("table");if(r){let e=Array.from(r.querySelectorAll("th")).map(e=>{var r;return(null==(r=e.textContent)?void 0:r.trim())||""}),s=Array.from(r.querySelectorAll("tbody tr")).map(e=>Array.from(e.querySelectorAll("td, th")).map(e=>{var r;return(null==(r=e.textContent)?void 0:r.trim())||""}));if(e.length>0||s.length>0)return(0,t.jsx)("div",{className:"overflow-x-auto mb-6",children:(0,t.jsxs)("table",{className:"w-full border-collapse border border-green-300",children:[(0,t.jsx)("thead",{className:"bg-green-50",children:(0,t.jsx)("tr",{className:"bg-green-50",children:e.map((e,r)=>(0,t.jsx)("th",{className:"border border-green-300 px-4 py-2 text-left",children:e},"".concat(e,"-").concat(r)))})}),(0,t.jsx)("tbody",{children:s.map((e,r)=>(0,t.jsx)("tr",{children:e.map((e,s)=>(0,t.jsx)("td",{className:"border border-green-300 px-4 py-2",children:e},"".concat(r,"-").concat(s)))},r))})]})})}}let s=JSON.parse(e);if(!1===r&&Array.isArray(s)&&(s=s.map(e=>e.hasOwnProperty("Significance")?{...e,Significance:"NaN"}:e)),Array.isArray(s)&&s.length>0){let e=Object.keys(s[0]),r=[...s].sort((r,s)=>{let t=r[e[0]],a=s[e[0]];return"string"==typeof t&&"string"==typeof a?t.localeCompare(a):"number"==typeof t&&"number"==typeof a?t-a:String(t).localeCompare(String(a))});return(0,t.jsx)("div",{className:"overflow-x-auto mb-6",children:(0,t.jsxs)("table",{className:"w-full border-collapse border border-green-300",children:[(0,t.jsx)("thead",{className:"bg-green-50",children:(0,t.jsx)("tr",{className:"bg-green-50",children:e.map(e=>(0,t.jsx)("th",{className:"border border-green-300 px-4 py-2 text-left",children:e},e))})}),(0,t.jsx)("tbody",{children:r.map((r,s)=>(0,t.jsx)("tr",{children:e.map(e=>(0,t.jsx)("td",{className:"border border-green-300 px-4 py-2",children:"reject"===e||isNaN(Number(r[e]))||null===r[e]||""===String(r[e]).trim()?String(r[e]):Number(r[e]).toFixed(2)},"".concat(s,"-").concat(e)))},s))})]})})}let a=Object.keys(s);if(a.length>0&&"object"==typeof s[a[0]]&&null!==s[a[0]]&&!Array.isArray(s[a[0]])){let e=Object.keys(s[a[0]]);return(0,t.jsx)("div",{className:"overflow-x-auto mb-6",children:(0,t.jsxs)("table",{className:"w-full border-collapse border border-green-300",children:[(0,t.jsx)("thead",{className:"bg-green-50",children:(0,t.jsxs)("tr",{className:"bg-green-50",children:[(0,t.jsx)("th",{className:"border border-green-300 px-4 py-2 text-left"}),a.map(e=>(0,t.jsx)("th",{className:"border border-green-300 px-4 py-2 text-left",children:e},e))]})}),(0,t.jsx)("tbody",{children:e.map(e=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"border border-green-300 px-4 py-2 font-medium",children:e}),a.map(r=>(0,t.jsx)("td",{className:"border border-green-300 px-4 py-2",children:isNaN(Number(s[r][e]))||null===s[r][e]||""===String(s[r][e]).trim()?String(s[r][e]):Number(s[r][e]).toFixed(2)},"".concat(e,"-").concat(r)))]},e))})]})})}throw Error("JSON data is not in a recognized table format.")}catch(r){return(0,t.jsx)("div",{className:"overflow-x-auto bg-green-50 p-4 rounded-md mb-6",dangerouslySetInnerHTML:{__html:e}})}},er=async()=>{if(!e)return void j("Please select a file first");b(!0),j("");try{let r=await e.arrayBuffer(),s=h.LF(r),t=s.SheetNames[0],a=s.Sheets[t],n=h.Wp.sheet_to_json(a,{defval:null});if(0===n.length)return void j("No data found in the file");let d=0;n.forEach(e=>{Object.values(e).forEach(e=>{(null==e||""===e)&&d++})}),w(d),l(n);let o=Object.keys(n[0]||{});y(o),console.log("Column Headers:",o)}catch(e){j("Error processing file. Please ensure it's a valid Excel file.")}finally{b(!1)}},es=async()=>{if(!e||!_||!k||!A||!F)return void D("Please select a file and specify all column names.");let r=s.length>0?Object.keys(s[0]):[],t=[];if(r.includes(_)||t.push("Block: ".concat(_)),r.includes(F)||t.push("Response: ".concat(F)),r.includes(k)||t.push("Factor 1: ".concat(k)),r.includes(A)||t.push("Factor 2: ".concat(A)),t.length>0)return void D("Column(s) not found in data: ".concat(t.join("; ")));E(!0),D(""),B(null),q(!1),H(30),$.current=setInterval(()=>{H(e=>e?e-1:null)},1e3);let a=new FormData,l=JSON.stringify(s);a.append("data",l),a.append("block_col",_),a.append("factor_cols",[k,A].join(",")),a.append("response_col",F);let n="https://frbd-service-737809041422.us-central1.run.app/frbd/analyze";if(!n){D("FRBD service URL not configured"),E(!1);return}try{let e=new AbortController,r=setTimeout(()=>e.abort(),3e4),s=await fetch(n,{method:"POST",body:a,signal:e.signal});if(clearTimeout(r),!s.ok){let e=await s.json();throw Error(e.error||"Analysis failed")}let t=await s.json();B(t),q(!0)}catch(e){"AbortError"===e.name?D("Request timed out. Please try again."):D(e.message||"An unexpected error occurred")}finally{E(!1),$.current&&clearInterval($.current),H(null)}},et=async()=>{if(!P)return void X("Please run the FRBD analysis first.");Q(!0),X(""),U("");try{let e={anova_table:P.anova_table,tukey_results:P.tukey_results,shapiro:P.shapiro,mean_separation_results:P.mean_separation_results,overall_cv:P.overall_cv,cd_value:P.cd_value},r=await f(e);U(r)}catch(e){X(e.message||"Failed to generate AI summary.")}finally{Q(!1)}};return(0,t.jsx)("div",{className:"min-h-screen bg-background p-4",children:(0,t.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,t.jsxs)("div",{className:"text-center mb-8",children:[(0,t.jsxs)("div",{className:"flex items-center justify-center mb-4",children:[(0,t.jsx)(m.A,{className:"h-8 w-8 text-green-600 mr-3"}),(0,t.jsx)("h1",{className:"text-3xl font-bold",children:"FRBD Analysis"})]}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Upload your Excel file and perform Factorial Randomized Block Design (FRBD) analysis."})]}),(0,t.jsxs)(i.Zp,{className:"mb-8 border border-green-200 rounded-lg",children:[(0,t.jsxs)(i.aR,{children:[(0,t.jsxs)(i.ZB,{className:"flex items-center",children:[(0,t.jsx)(u.A,{className:"h-5 w-5 mr-2"}),"Upload Data File"]}),(0,t.jsx)(i.BT,{children:"Select an Excel (.xlsx) file containing your data (up to 5 MB)"})]}),(0,t.jsxs)(i.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"text-sm",children:["Before uploading check out the required data format.",(0,t.jsx)(n(),{href:"/data_arrangement#frbd-section",passHref:!0,children:(0,t.jsx)(o.$,{variant:"link",className:"p-1 h-auto ml-1, text-blue-600 hover:underline",children:"Read this to prepare your data."})})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsx)(c.p,{type:"file",accept:".xlsx,.xls",onChange:e=>{var s;let t=null==(s=e.target.files)?void 0:s[0];t&&(r(t),j(""),l([]),B(null))},className:"flex-1 bg-green-50",ref:I}),(0,t.jsx)(o.$,{onClick:er,disabled:!e||p,className:"min-w-[120px]",children:p?"Processing...":"Process File"}),(0,t.jsx)(o.$,{onClick:()=>{r(null),l([]),j(""),S(""),R(""),C(""),O(""),B(null),D(""),E(!1),q(!1),W(!1),w(0),I.current&&(I.current.value="")},variant:"outline",disabled:!e&&0===s.length&&!P,className:"min-w-[120px]",children:"Reset"})]}),e&&(0,t.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Selected file: ",e.name]}),g&&(0,t.jsx)("div",{className:"text-red-600 text-sm bg-red-50 p-3 rounded",children:g})]})]}),s.length>0&&(0,t.jsxs)(i.Zp,{className:"mb-8 border border-green-200 rounded-lg",children:[(0,t.jsxs)(i.aR,{children:[(0,t.jsx)(i.ZB,{children:"Data Preview"}),(0,t.jsx)(i.BT,{children:"First 5 rows of the uploaded data."})]}),(0,t.jsxs)(i.Wu,{children:[(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-full divide-y divide-green-200",children:[(0,t.jsx)("thead",{className:"bg-green-50",children:(0,t.jsx)("tr",{children:Object.keys(s[0]||{}).map(e=>(0,t.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:e},e))})}),(0,t.jsx)("tbody",{className:"bg-white divide-y divide-green-200",children:s.slice(0,5).map((e,r)=>(0,t.jsx)("tr",{children:Object.values(e).map((e,r)=>(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:"number"==typeof e?e.toFixed(2):null==e?void 0:e.toString()},r))},r))})]})}),(0,t.jsxs)("div",{className:"mt-4 text-sm text-muted-foreground",children:["Total rows: ",s.length]}),N>0&&(0,t.jsxs)("div",{className:"mt-2 text-sm text-yellow-600",children:["Warning: Found ",N," missing value(s) in your data. Rows with missing values will be excluded from the analysis."]})]})]}),(0,t.jsxs)(i.Zp,{className:"mb-8 border border-green-200 rounded-lg",children:[(0,t.jsxs)(i.aR,{children:[(0,t.jsx)(i.ZB,{children:"FRBD Analysis Setup"}),(0,t.jsx)(i.BT,{children:"Specify the columns for the analysis."})]}),(0,t.jsxs)(i.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block mb-1 font-medium",children:"Block Column (eg. replication)"}),(0,t.jsxs)("select",{value:_,onChange:e=>S(e.target.value),className:"block w-full p-2 border border-green-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500 sm:text-sm",children:[(0,t.jsx)("option",{value:"",children:"Select a column"}),v.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block mb-1 font-medium",children:"Response Column (eg. yield)"}),(0,t.jsxs)("select",{value:F,onChange:e=>O(e.target.value),className:"block w-full p-2 border border-green-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500 sm:text-sm",children:[(0,t.jsx)("option",{value:"",children:"Select a column"}),v.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block mb-1 font-medium",children:"Factor (1) Column"}),(0,t.jsxs)("select",{value:k,onChange:e=>R(e.target.value),className:"block w-full p-2 border border-green-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500 sm:text-sm",children:[(0,t.jsx)("option",{value:"",children:"Select a column"}),v.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block mb-1 font-medium",children:"Factor (2) Column"}),(0,t.jsxs)("select",{value:A,onChange:e=>C(e.target.value),className:"block w-full p-2 border border-green-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500 sm:text-sm",children:[(0,t.jsx)("option",{value:"",children:"Select a column"}),v.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]})]})]})]}),(0,t.jsxs)("div",{className:"px-6 pb-6",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[" ",(0,t.jsx)(o.$,{onClick:es,disabled:T||!_||!k||!A||!F,children:T?"Running Analysis... (".concat(L,"s)"):"Run FRBD Analysis"}),Z&&!T&&(0,t.jsxs)("div",{className:"text-green-600 text-sm bg-green-50 p-3 rounded",children:[" ","Analysis over. Results are below."]})]}),M&&(0,t.jsx)("div",{className:"text-red-600 text-sm bg-red-50 p-3 rounded mt-4",children:M})]})]}),P&&(0,t.jsxs)(i.Zp,{className:"mb-8 border border-green-200 rounded-lg",children:[(0,t.jsx)(i.aR,{children:(0,t.jsx)(i.ZB,{children:"Diagnostic Plots and Normality Test"})}),(0,t.jsxs)(i.Wu,{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Diagnostic Plots"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[P.plots.residuals_vs_fitted&&Y(P.plots.residuals_vs_fitted)&&(0,t.jsxs)("div",{className:"border p-2 rounded-md",children:[(0,t.jsx)("h4",{className:"text-md font-medium mb-1",children:"Residuals vs Fitted"}),(0,t.jsx)(d.default,{src:"data:image/png;base64,".concat(P.plots.residuals_vs_fitted),alt:"Residuals vs Fitted Plot",width:500,height:300,className:"w-full h-auto"})]}),P.plots.qq_plot&&Y(P.plots.qq_plot)&&(0,t.jsxs)("div",{className:"border p-2 rounded-md",children:[(0,t.jsx)("h4",{className:"text-md font-medium mb-1",children:"Normal Q-Q Plot"}),(0,t.jsx)(d.default,{src:"data:image/png;base64,".concat(P.plots.qq_plot),alt:"Normal Q-Q Plot",width:500,height:300,className:"w-full h-auto"})]})]}),(0,t.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Shapiro-Wilk Test for Normality of Residuals"}),P.shapiro&&(0,t.jsxs)("div",{className:"bg-green-50 p-4 rounded-md mb-6",children:[(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Statistic:"})," ",P.shapiro.stat.toFixed(4)]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"P-value:"})," ",P.shapiro.p.toFixed(4)]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mt-2",children:P.shapiro.p<.05?"Residuals are likely not normally distributed (p < 0.05).":"Residuals appear to be normally distributed (p >= 0.05)."})]})]})]}),P&&(0,t.jsxs)(i.Zp,{className:"mb-8 border border-green-200 rounded-lg",children:[(0,t.jsxs)(i.aR,{className:"flex flex-row items-center justify-between",children:[(0,t.jsx)(i.ZB,{children:"FRBD Analysis Results"}),(0,t.jsxs)(o.$,{variant:"outline",size:"sm",onClick:()=>W(!z),children:[z?"Hide":"Show"," Raw JSON"]})]}),z&&(0,t.jsx)(i.Wu,{children:(0,t.jsx)("pre",{className:"p-4 bg-gray-100 rounded-md overflow-x-auto",children:JSON.stringify(P,null,2)})}),(0,t.jsxs)(i.Wu,{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"ANOVA Table"}),(0,t.jsx)("div",{className:"overflow-x-auto mb-6",children:P.anova_table&&(()=>{try{let e=JSON.parse(P.anova_table),r=Object.keys(e),s=r.length>0?Object.keys(e[r[0]]).length:0;if(0===s)return(0,t.jsxs)("p",{children:["ANOVA table is empty or could not be parsed. Raw data: ",P.anova_table]});return(0,t.jsxs)("table",{className:"w-full border-collapse border border-green-300",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"bg-green-50",children:[(0,t.jsx)("th",{className:"border border-green-300 px-4 py-2 text-left",children:"Source of error"}),r.map((e,r)=>(0,t.jsx)("th",{className:"border border-green-300 px-4 py-2 text-left",children:e},r)),(0,t.jsx)("th",{className:"border border-green-300 px-4 py-2 text-left",children:"Significance (alpha=0.05)"})]})}),(0,t.jsx)("tbody",{children:Object.keys(e[r[0]]).map(s=>{var a;let l=null==(a=e["PR(>F)"])?void 0:a[s];return(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"border border-green-300 px-4 py-2 font-medium",children:K(s)}),r.map((r,a)=>(0,t.jsx)("td",{className:"border border-green-300 px-4 py-2",children:e[r][s]},a)),(0,t.jsx)("td",{className:"border border-green-300 px-4 py-2",children:null!=l?l<.05?"Significant":"Not significant":""})]},s)})})]})}catch(e){return console.error("Error parsing ANOVA table:",e),(0,t.jsxs)("p",{children:["Error loading ANOVA table. Raw data: ",P.anova_table]})}})()}),null!==P.overall_cv&&void 0!==P.overall_cv&&(0,t.jsxs)("div",{className:"text-left text-sm text-muted-foreground mb-5",children:["Overall CV (%): ",P.overall_cv.toFixed(2)]}),(0,t.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Tukey HSD Post-Hoc Tests"}),P.tukey_results&&Object.keys(P.tukey_results).map(e=>(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsxs)("h4",{className:"text-md font-medium mb-1",children:["Factor: ",K(e)]}),ee(P.tukey_results[e])]},e)),(0,t.jsx)("h3",{className:"text-lg font-semibold my-4",children:"Mean Separation Results"}),P.mean_separation_results&&Object.keys(P.mean_separation_results).map(e=>{let r=K(e);return(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsxs)("h4",{className:"text-md font-medium mb-1",children:["Factor: ",r]}),ee(P.mean_separation_results[e])]},e)}),null!==P.cd_value&&void 0!==P.cd_value&&(0,t.jsxs)("div",{className:"text-left text-sm text-muted-foreground mb-5",children:["Critical Difference (CD): ",P.cd_value.toFixed(2)]}),(0,t.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Mean Plots"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[[k,A].map(e=>P.plots["mean_bar_plot_".concat(e)]&&Y(P.plots["mean_bar_plot_".concat(e)])&&(0,t.jsxs)("div",{className:"border p-2 rounded-md",children:[(0,t.jsxs)("h4",{className:"text-md font-medium mb-1",children:["Bar Plot for ",e]}),(0,t.jsx)(d.default,{src:"data:image/png;base64,".concat(P.plots["mean_bar_plot_".concat(e)]),alt:"Bar Plot for ".concat(e),width:500,height:300,className:"w-full h-auto"})]},"bar-plot-".concat(e))),[k,A].map(e=>P.plots["mean_box_plot_".concat(e)]&&Y(P.plots["mean_box_plot_".concat(e)])&&(0,t.jsxs)("div",{className:"border p-2 rounded-md",children:[(0,t.jsxs)("h4",{className:"text-md font-medium mb-1",children:["Box Plot for ",e]}),(0,t.jsx)(d.default,{src:"data:image/png;base64,".concat(P.plots["mean_box_plot_".concat(e)]),alt:"Box Plot for ".concat(e),width:500,height:300,className:"w-full h-auto"})]},"box-plot-".concat(e)))]})]})]}),P&&(0,t.jsxs)(i.Zp,{className:"mb-8 border border-green-200 rounded-lg",children:[(0,t.jsx)(i.aR,{children:(0,t.jsx)(i.ZB,{children:"AI-Powered Summary"})}),(0,t.jsxs)(i.Wu,{children:[(0,t.jsxs)(o.$,{onClick:et,disabled:J,children:[(0,t.jsx)(x.A,{className:"h-4 w-4 mr-2"}),J?"Generating Summary...":"Generate AI Summary"]}),G&&(0,t.jsx)("div",{className:"text-red-600 text-sm bg-red-50 p-3 rounded mt-4",children:G}),V&&(0,t.jsx)("div",{className:"prose prose-sm max-w-none mt-4",dangerouslySetInnerHTML:{__html:V.replace(/\n/g,"<br />")}})]}),(0,t.jsx)(i.Wu,{children:(0,t.jsx)(o.$,{disabled:!0,children:"Generate Report"})})]})]})})}},1469:(e,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),!function(e,r){for(var s in r)Object.defineProperty(e,s,{enumerable:!0,get:r[s]})}(r,{default:function(){return o},getImageProps:function(){return d}});let t=s(8229),a=s(8883),l=s(3063),n=t._(s(1193));function d(e){let{props:r}=(0,a.getImgProps)(e,{defaultLoader:n.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,s]of Object.entries(r))void 0===s&&delete r[e];return{props:r}}let o=l.Image},2383:()=>{},2523:(e,r,s)=>{"use strict";s.d(r,{p:()=>n});var t=s(5155),a=s(2115),l=s(9434);let n=a.forwardRef((e,r)=>{let{className:s,type:a,...n}=e;return(0,t.jsx)("input",{type:a,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:r,...n})});n.displayName="Input"},3686:()=>{},4477:(e,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),!function(e,r){for(var s in r)Object.defineProperty(e,s,{enumerable:!0,get:r[s]})}(r,{callServer:function(){return t.callServer},createServerReference:function(){return l},findSourceMapURL:function(){return a.findSourceMapURL}});let t=s(3806),a=s(1818),l=s(4979).createServerReference},4601:(e,r,s)=>{"use strict";s.d(r,{A:()=>t});let t=(0,s(157).A)("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]])},5263:(e,r,s)=>{"use strict";s.d(r,{A:()=>t});let t=(0,s(157).A)("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},6695:(e,r,s)=>{"use strict";s.d(r,{BT:()=>i,Wu:()=>c,ZB:()=>o,Zp:()=>n,aR:()=>d});var t=s(5155),a=s(2115),l=s(9434);let n=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("div",{ref:r,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...a})});n.displayName="Card";let d=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("div",{ref:r,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",s),...a})});d.displayName="CardHeader";let o=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("h3",{ref:r,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",s),...a})});o.displayName="CardTitle";let i=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("p",{ref:r,className:(0,l.cn)("text-sm text-muted-foreground",s),...a})});i.displayName="CardDescription";let c=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("div",{ref:r,className:(0,l.cn)("p-6 pt-0",s),...a})});c.displayName="CardContent",a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("div",{ref:r,className:(0,l.cn)("flex items-center p-6 pt-0",s),...a})}).displayName="CardFooter"},6766:(e,r,s)=>{"use strict";s.d(r,{default:()=>a.a});var t=s(1469),a=s.n(t)},6923:(e,r,s)=>{"use strict";s.d(r,{A:()=>t});let t=(0,s(157).A)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},6947:(e,r,s)=>{Promise.resolve().then(s.bind(s,1001))},9434:(e,r,s)=>{"use strict";s.d(r,{cn:()=>l});var t=s(2596),a=s(9688);function l(){for(var e=arguments.length,r=Array(e),s=0;s<e;s++)r[s]=arguments[s];return(0,a.QP)((0,t.$)(r))}}},e=>{var r=r=>e(e.s=r);e.O(0,[524,668,874,63,441,684,358],()=>r(6947)),_N_E=e.O()}]);