(()=>{var e={};e.id=273,e.ids=[273],e.modules={128:e=>{"use strict";e.exports=import("genkit")},254:e=>{"use strict";e.exports=require("genkit")},474:(e,s,r)=>{"use strict";r.d(s,{default:()=>l.a});var t=r(1261),l=r.n(t)},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1261:(e,s,r)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),!function(e,s){for(var r in s)Object.defineProperty(e,r,{enumerable:!0,get:s[r]})}(s,{default:function(){return d},getImageProps:function(){return n}});let t=r(4985),l=r(4953),a=r(6533),i=t._(r(1933));function n(e){let{props:s}=(0,l.getImgProps)(e,{defaultLoader:i.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,r]of Object.entries(s))void 0===r&&delete s[e];return{props:s}}let d=a.Image},1708:e=>{"use strict";e.exports=require("node:process")},2206:e=>{"use strict";e.exports=import("genkit/plugin")},2343:e=>{"use strict";e.exports=require("genkit/tracing")},2579:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>t});let t=(0,r(2907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/gajendrababubaktavachalam/WebApps/statviz/stats/frontend/src/app/rbd/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/gajendrababubaktavachalam/WebApps/statviz/stats/frontend/src/app/rbd/page.tsx","default")},2710:e=>{"use strict";e.exports=import("genkit/model")},2721:(e,s,r)=>{Promise.resolve().then(r.bind(r,7180))},2812:e=>{"use strict";e.exports=require("genkit/model")},3024:e=>{"use strict";e.exports=require("node:fs")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3136:e=>{"use strict";e.exports=require("node:url")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3566:e=>{"use strict";e.exports=require("worker_threads")},3873:e=>{"use strict";e.exports=require("path")},4209:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>i.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>o});var t=r(5239),l=r(8088),a=r(8170),i=r.n(a),n=r(893),d={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);r.d(s,d);let o={children:["",{children:["rbd",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,2579)),"/Users/gajendrababubaktavachalam/WebApps/statviz/stats/frontend/src/app/rbd/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,4431)),"/Users/gajendrababubaktavachalam/WebApps/statviz/stats/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,7398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,9999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,5284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,c=["/Users/gajendrababubaktavachalam/WebApps/statviz/stats/frontend/src/app/rbd/page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},m=new t.AppPageRouteModule({definition:{kind:l.RouteKind.APP_PAGE,page:"/rbd/page",pathname:"/rbd",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},4555:(e,s,r)=>{"use strict";r.d(s,{A:()=>t});let t=(0,r(2614).A)("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]])},4573:e=>{"use strict";e.exports=require("node:buffer")},4708:e=>{"use strict";e.exports=require("node:https")},4743:e=>{"use strict";e.exports=require("genkit/embedder")},4793:e=>{"use strict";e.exports=require("genkit/model/middleware")},5511:e=>{"use strict";e.exports=require("crypto")},5576:e=>{"use strict";e.exports=require("genkit/logging")},6141:e=>{"use strict";e.exports=require("node:zlib")},6760:e=>{"use strict";e.exports=require("node:path")},7030:e=>{"use strict";e.exports=require("node:net")},7067:e=>{"use strict";e.exports=require("node:http")},7075:e=>{"use strict";e.exports=require("node:stream")},7180:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>g});var t=r(687),l=r(3210),a=r(5814),i=r.n(a),n=r(474),d=r(9523),o=r(4493),c=r(9667),u=r(7629),m=r(3729),p=r(9196),x=r(4555),b=r(3103),h=r(6475);let f=(0,h.createServerReference)("40c97768726835eb6303c93fb3edc7bea7f930e73f",h.callServer,void 0,h.findSourceMapURL,"generateRbdAnalysisSummary");function g(){let[e,s]=(0,l.useState)(null),[r,a]=(0,l.useState)([]),[h,g]=(0,l.useState)(!1),[j,v]=(0,l.useState)(""),[y,N]=(0,l.useState)([]),[S,_]=(0,l.useState)(0),[k,w]=(0,l.useState)(""),[A,P]=(0,l.useState)(!1),[R,q]=(0,l.useState)(""),[C,O]=(0,l.useState)(""),[B,M]=(0,l.useState)(""),[$,F]=(0,l.useState)(""),[z,E]=(0,l.useState)(""),[D,T]=(0,l.useState)(""),[W,I]=(0,l.useState)([]),[Z,V]=(0,l.useState)(null),[L,H]=(0,l.useState)(""),[J,U]=(0,l.useState)(!1),[G,Q]=(0,l.useState)(!1),[K,X]=(0,l.useState)({}),[Y,ee]=(0,l.useState)(!1),[es,er]=(0,l.useState)(!1),et=(0,l.useRef)(null),[el,ea]=(0,l.useState)(null),ei=(0,l.useRef)(null),en=e=>{let s=[...e.matchAll(/Q\(['"]([^\'\"]*)['"]\)/g)];if(s.length>0)return[...new Set(s.map(e=>e[1]))].join(":");let r=e.match(/^C\((.+)\)$/);return r?r[1]:e},ed=(e,s)=>{try{if("string"==typeof e&&e.includes("<table")){let s=new DOMParser().parseFromString(e,"text/html").querySelector("table");if(s){let e=Array.from(s.querySelectorAll("th")).map(e=>e.textContent?.trim()||""),r=Array.from(s.querySelectorAll("tbody tr")).map(e=>Array.from(e.querySelectorAll("td, th")).map(e=>e.textContent?.trim()||""));if(e.length>0||r.length>0)return(0,t.jsx)("div",{className:"overflow-x-auto mb-6",children:(0,t.jsxs)("table",{className:"w-full border-collapse border border-blue-300",children:[(0,t.jsx)("thead",{className:"bg-blue-50",children:(0,t.jsx)("tr",{className:"bg-blue-50",children:e.map((e,s)=>(0,t.jsx)("th",{className:"border border-blue-300 px-4 py-2 text-left",children:e},`${e}-${s}`))})}),(0,t.jsx)("tbody",{children:r.map((e,s)=>(0,t.jsx)("tr",{children:e.map((e,r)=>(0,t.jsx)("td",{className:"border border-blue-300 px-4 py-2",children:e},`${s}-${r}`))},s))})]})})}}let r=JSON.parse(e);if(!1===s&&Array.isArray(r)&&(r=r.map(e=>e.hasOwnProperty("Significance")?{...e,Significance:"NaN"}:e)),Array.isArray(r)&&r.length>0){let e=Object.keys(r[0]),s=[...r].sort((s,r)=>{let t=s[e[0]],l=r[e[0]];return"string"==typeof t&&"string"==typeof l?t.localeCompare(l):"number"==typeof t&&"number"==typeof l?t-l:String(t).localeCompare(String(l))});return(0,t.jsx)("div",{className:"overflow-x-auto mb-6",children:(0,t.jsxs)("table",{className:"w-full border-collapse border border-blue-300",children:[(0,t.jsx)("thead",{className:"bg-blue-50",children:(0,t.jsx)("tr",{className:"bg-blue-50",children:e.map(e=>(0,t.jsx)("th",{className:"border border-blue-300 px-4 py-2 text-left",children:e},e))})}),(0,t.jsx)("tbody",{children:s.map((s,r)=>(0,t.jsx)("tr",{children:e.map(e=>(0,t.jsx)("td",{className:"border border-blue-300 px-4 py-2",children:"reject"===e||isNaN(Number(s[e]))||null===s[e]||""===String(s[e]).trim()?String(s[e]):Number(s[e]).toFixed(2)},`${r}-${e}`))},r))})]})})}let l=Object.keys(r);if(l.length>0&&"object"==typeof r[l[0]]&&null!==r[l[0]]&&!Array.isArray(r[l[0]])){let e=Object.keys(r[l[0]]);return(0,t.jsx)("div",{className:"overflow-x-auto mb-6",children:(0,t.jsxs)("table",{className:"w-full border-collapse border border-blue-300",children:[(0,t.jsx)("thead",{className:"bg-blue-50",children:(0,t.jsxs)("tr",{className:"bg-blue-50",children:[(0,t.jsx)("th",{className:"border border-blue-300 px-4 py-2 text-left"}),l.map(e=>(0,t.jsx)("th",{className:"border border-blue-300 px-4 py-2 text-left",children:e},e))]})}),(0,t.jsx)("tbody",{children:e.map(e=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"border border-blue-300 px-4 py-2 font-medium",children:e}),l.map(s=>(0,t.jsx)("td",{className:"border border-blue-300 px-4 py-2",children:isNaN(Number(r[s][e]))||null===r[s][e]||""===String(r[s][e]).trim()?String(r[s][e]):Number(r[s][e]).toFixed(2)},`${e}-${s}`))]},e))})]})})}throw Error("JSON data is not in a recognized table format.")}catch(s){return(0,t.jsx)("div",{className:"overflow-x-auto bg-blue-50 p-4 rounded-md mb-6",dangerouslySetInnerHTML:{__html:e}})}},eo=async()=>{if(!e)return void v("Please select a file first");g(!0),v("");try{let s=await e.arrayBuffer(),r=b.LF(s),t=r.SheetNames[0],l=r.Sheets[t],i=b.Wp.sheet_to_json(l,{defval:null});if(0===i.length)return void v("No data found in the file");let n=0;i.forEach(e=>{Object.values(e).forEach(e=>{(null==e||""===e)&&n++})}),_(n),a(i),N(Object.keys(i[0]||{}))}catch(e){v("Error processing file. Please ensure it's a valid Excel file.")}finally{g(!1)}},ec=async()=>{if(!e||!C||!B||!$||z&&!D)return void H("Please select a file and specify all required column names, and a response variable if a response variable column is selected.");let s=r;if(z&&D&&0===(s=r.filter(e=>e[z]?.toString()===D)).length)return void H(`No data found for selected response variable: ${D}`);U(!0),H(""),V(null),ee(!1),ea(30),ei.current=setInterval(()=>{ea(e=>e?e-1:null)},1e3);let t=new FormData;t.append("data",JSON.stringify(s)),t.append("block_col",C),t.append("factor_col",B),t.append("response_col",$);let l="https://rbd-service-737809041422.us-central1.run.app/rbd/analyze";if(!l){H("RBD service URL not configured"),U(!1);return}try{let e=new AbortController,s=setTimeout(()=>e.abort(),3e4),r=await fetch(l,{method:"POST",body:t,signal:e.signal});if(clearTimeout(s),!r.ok){let e=await r.json();throw Error(e.error||"Analysis failed")}let a=await r.json();if(V(a),ee(!0),a.anova_table)try{let e=JSON.parse(a.anova_table),s={},r=e["PR(>F)"];r&&Object.keys(r).forEach(e=>{let t=r[e];s[en(e)]=t<.05}),X(s)}catch(e){console.error("Could not parse anova_table to determine significance",e),X({})}}catch(e){"AbortError"===e.name?H("Request timed out. Please try again."):H(e.message||"An unexpected error occurred")}finally{U(!1),ei.current&&clearInterval(ei.current),ea(null)}},eu=async()=>{if(!Z)return void q("Please run the RBD analysis first.");P(!0),q(""),w("");try{let e={anova_table:Z.anova_table,tukey_results:JSON.stringify(Z.tukey_results),shapiro:Z.shapiro,mean_separation_results:JSON.stringify(Z.mean_separation_results),f_oneway_results:Z.f_oneway_results,overall_cv:Z.overall_cv,cd_value:Z.cd_value},s=await f(e);w(s)}catch(e){q(e.message||"Failed to generate AI summary.")}finally{P(!1)}};return(0,t.jsx)("div",{className:"min-h-screen bg-background p-4",children:(0,t.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,t.jsxs)("div",{className:"text-center mb-8",children:[(0,t.jsxs)("div",{className:"flex items-center justify-center mb-4",children:[(0,t.jsx)(u.A,{className:"h-8 w-8 text-blue-600 mr-3"}),(0,t.jsx)("h1",{className:"text-3xl font-bold",children:"RCBD Analysis"})]}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Upload your Excel file and perform Randomized Complete Block Design (RCBD) analysis."})]}),(0,t.jsxs)(o.Zp,{className:"mb-8 border border-blue-200 rounded-lg",children:[(0,t.jsxs)(o.aR,{children:[(0,t.jsxs)(o.ZB,{className:"flex items-center",children:[(0,t.jsx)(m.A,{className:"h-5 w-5 mr-2"}),"Upload Data File"]}),(0,t.jsx)(o.BT,{children:"Select an Excel (.xlsx) file containing your data (up to 5 MB)"})]}),(0,t.jsxs)(o.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"text-sm",children:["Before uploading check out the required data format.",(0,t.jsx)(i(),{href:"/data_arrangement",passHref:!0,children:(0,t.jsx)(d.$,{variant:"link",className:"p-1 h-auto ml-1, text-blue-600 hover:underline",children:"Read this to prepare your data."})})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsx)(c.p,{type:"file",accept:".xlsx,.xls",onChange:e=>{let r=e.target.files?.[0];r&&(s(r),v(""),a([]),V(null))},className:"flex-1 bg-blue-50",ref:et}),(0,t.jsx)(d.$,{onClick:eo,disabled:!e||h,className:"min-w-[120px]",children:h?"Processing...":"Process File"}),(0,t.jsx)(d.$,{onClick:()=>{s(null),a([]),v(""),O(""),M(""),F(""),E(""),T(""),I([]),V(null),H(""),U(!1),X({}),ee(!1),er(!1),w(""),q(""),P(!1),_(0),et.current&&(et.current.value="")},variant:"outline",disabled:!e&&0===r.length&&!Z,className:"min-w-[120px]",children:"Reset"})]}),e&&(0,t.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Selected file: ",e.name]}),j&&(0,t.jsx)("div",{className:"text-red-600 text-sm bg-red-50 p-3 rounded",children:j})]})]}),r.length>0&&(0,t.jsxs)(o.Zp,{className:"mb-8 border border-blue-200 rounded-lg",children:[(0,t.jsxs)(o.aR,{children:[(0,t.jsx)(o.ZB,{children:"Data Preview"}),(0,t.jsx)(o.BT,{children:"First 5 rows of the uploaded data."})]}),(0,t.jsxs)(o.Wu,{children:[(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-full divide-y divide-blue-200",children:[(0,t.jsx)("thead",{className:"bg-blue-50",children:(0,t.jsx)("tr",{children:Object.keys(r[0]||{}).map(e=>(0,t.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:e},e))})}),(0,t.jsx)("tbody",{className:"bg-white divide-y divide-blue-200",children:r.slice(0,5).map((e,s)=>(0,t.jsx)("tr",{children:Object.values(e).map((e,s)=>(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:"number"==typeof e?e.toFixed(2):e?.toString()},s))},s))})]})}),(0,t.jsxs)("div",{className:"mt-4 text-sm text-muted-foreground",children:["Total rows: ",r.length]}),S>0&&(0,t.jsxs)("div",{className:"mt-2 text-sm text-yellow-600",children:["Warning: Found ",S," missing value(s) in your data. Rows with missing values will be excluded from the analysis."]})]})]}),r.length>0&&(0,t.jsxs)(o.Zp,{className:"mb-8 border border-blue-200 rounded-lg",children:[(0,t.jsxs)(o.aR,{children:[(0,t.jsx)(o.ZB,{children:"RCBD Analysis Setup"}),(0,t.jsx)(o.BT,{children:"Specify the columns for the analysis."})]}),(0,t.jsxs)(o.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block mb-1 font-medium",children:"Block Column (eg. replication)"}),(0,t.jsxs)("select",{value:C,onChange:e=>O(e.target.value),className:"block w-full p-2 border border-blue-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[(0,t.jsx)("option",{value:"",children:"Select a column"}),y.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block mb-1 font-medium",children:"Factor Column (eg, treatment)"}),(0,t.jsxs)("select",{value:B,onChange:e=>M(e.target.value),className:"block w-full p-2 border border-blue-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[(0,t.jsx)("option",{value:"",children:"Select a column"}),y.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block mb-1 font-medium",children:"Response Variable Column (Optional)"}),(0,t.jsxs)("select",{value:z,onChange:e=>{E(e.target.value),T(""),e.target.value?I([...new Set(r.map(s=>s[e.target.value]))].map(String)):I([])},className:"block w-full p-2 border border-blue-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[(0,t.jsx)("option",{value:"",children:"Select a column for response variable"}),y.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]})]}),z&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block mb-1 font-medium",children:"Select Response Variable "}),(0,t.jsxs)("select",{value:D,onChange:e=>T(e.target.value),className:"block w-full p-2 border border-blue-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[(0,t.jsx)("option",{value:"",children:"Select a variable"}),W.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]})]})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block mb-1 font-medium",children:"Response Value Column (eg. yield)"}),(0,t.jsxs)("select",{value:$,onChange:e=>F(e.target.value),className:"block w-full p-2 border border-blue-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[(0,t.jsx)("option",{value:"",children:"Select a column"}),y.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]})]})})]}),(0,t.jsxs)("div",{className:"px-6 pb-6",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[" ",(0,t.jsx)(d.$,{onClick:ec,disabled:J||!C||!B||!$||z&&!D,children:J?`Running Analysis... (${el}s)`:"Run RCBD Analysis"}),Y&&!J&&(0,t.jsxs)("div",{className:"text-blue-600 text-sm bg-blue-50 p-3 rounded",children:[" ","Analysis over. Results are below."]})]}),L&&(0,t.jsx)("div",{className:"text-red-600 text-sm bg-red-50 p-3 rounded mt-4",children:L})]})]}),Z&&(0,t.jsxs)(o.Zp,{className:"mb-8 border border-blue-200 rounded-lg",children:[(0,t.jsx)(o.aR,{children:(0,t.jsx)(o.ZB,{children:"Diagnostic Plots and Normality Test"})}),(0,t.jsxs)(o.Wu,{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Diagnostic Plots"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Z.plots.residuals_vs_fitted&&(0,t.jsxs)("div",{className:"border p-2 rounded-md",children:[(0,t.jsx)("h4",{className:"text-md font-medium mb-1",children:"Residuals vs Fitted"}),(0,t.jsx)(n.default,{src:`data:image/png;base64,${Z.plots.residuals_vs_fitted}`,alt:"Residuals vs Fitted Plot",width:500,height:300,className:"w-full h-auto"})]}),Z.plots.qq_plot&&(0,t.jsxs)("div",{className:"border p-2 rounded-md",children:[(0,t.jsx)("h4",{className:"text-md font-medium mb-1",children:"Normal Q-Q Plot"}),(0,t.jsx)(n.default,{src:`data:image/png;base64,${Z.plots.qq_plot}`,alt:"Normal Q-Q Plot",width:500,height:300,className:"w-full h-auto"})]})]}),(0,t.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Shapiro-Wilk Test for Normality of Residuals"}),Z.shapiro&&(0,t.jsxs)("div",{className:"bg-blue-50 p-4 rounded-md mb-6",children:[(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Statistic:"})," ",Z.shapiro.stat.toFixed(4)]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"P-value:"})," ",Z.shapiro.p.toFixed(4)]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mt-2",children:Z.shapiro.p<.05?"Residuals are likely not normally distributed (p < 0.05).":"Residuals appear to be normally distributed (p >= 0.05)."})]})]})]}),Z&&(0,t.jsxs)(o.Zp,{className:"mb-8 border border-blue-200 rounded-lg",children:[(0,t.jsxs)(o.aR,{className:"flex flex-row items-center justify-between",children:[(0,t.jsx)(o.ZB,{children:"RCBD Analysis Results"}),(0,t.jsxs)(d.$,{variant:"outline",size:"sm",onClick:()=>er(!es),children:[es?"Hide":"Show"," Raw JSON"]})]}),es&&(0,t.jsx)(o.Wu,{children:(0,t.jsx)("pre",{className:"p-4 bg-gray-100 rounded-md overflow-x-auto",children:JSON.stringify(Z,null,2)})}),(0,t.jsxs)(o.Wu,{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"ANOVA Table"}),(0,t.jsx)("div",{className:"overflow-x-auto mb-6",children:Z.anova_table&&(()=>{try{let e=JSON.parse(Z.anova_table),s=Object.keys(e),r=s.length>0?Object.keys(e[s[0]]).length:0;if(0===r)return(0,t.jsxs)("p",{children:["ANOVA table is empty or could not be parsed. Raw data: ",Z.anova_table]});return(0,t.jsxs)("table",{className:"w-full border-collapse border border-blue-300",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"bg-blue-50",children:[(0,t.jsx)("th",{className:"border border-blue-300 px-4 py-2 text-left",children:"Source of error"}),s.map((e,s)=>(0,t.jsx)("th",{className:"border border-blue-300 px-4 py-2 text-left",children:e},s)),(0,t.jsx)("th",{className:"border border-blue-300 px-4 py-2 text-left",children:"Significance (alpha=0.05)"})]})}),(0,t.jsx)("tbody",{children:Object.keys(e[s[0]]).map(r=>{let l=e["PR(>F)"]?.[r];return(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"border border-blue-300 px-4 py-2 font-medium",children:en(r)}),s.map((s,l)=>(0,t.jsx)("td",{className:"border border-blue-300 px-4 py-2",children:e[s][r]},l)),(0,t.jsx)("td",{className:"border border-blue-300 px-4 py-2",children:null!=l?l<.05?"Significant":"Not significant":""})]},r)})})]})}catch(e){return console.error("Error parsing ANOVA table:",e),(0,t.jsxs)("p",{children:["Error loading ANOVA table. Raw data: ",Z.anova_table]})}})()}),null!==Z.overall_cv&&void 0!==Z.overall_cv&&(0,t.jsxs)("div",{className:"text-left text-sm text-muted-foreground mb-5",children:["Overall CV (%): ",Z.overall_cv.toFixed(2)]}),(0,t.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Tukey HSD Post-Hoc Tests"}),Z.tukey_results&&Object.keys(Z.tukey_results).map(e=>(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsxs)("h4",{className:"text-md font-medium mb-1",children:["Factor: ",en(e)]}),ed(Z.tukey_results[e])]},e)),Z.tukey_explanation&&(0,t.jsxs)("div",{children:[(0,t.jsxs)(d.$,{onClick:()=>Q(!G),variant:"link",children:[(0,t.jsx)(p.A,{className:"h-4 w-4 mr-2"}),G?"Hide":"Show"," Explanation of the Post-hoc table"]}),G&&(0,t.jsx)("div",{className:"prose prose-sm max-w-none mt-2",dangerouslySetInnerHTML:{__html:Z.tukey_explanation}})]}),(0,t.jsx)("h3",{className:"text-lg font-semibold my-4",children:"Mean Separation Results"}),Z.mean_separation_results&&Object.keys(Z.mean_separation_results).map(e=>{let s=en(e);return(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsxs)("h4",{className:"text-md font-medium mb-1",children:["Factor: ",s]}),ed(Z.mean_separation_results[e],K[s])]},e)}),null!==Z.cd_value&&void 0!==Z.cd_value&&(0,t.jsxs)("div",{className:"text-left text-sm text-muted-foreground mb-5",children:["Critical Difference (CD): ",Z.cd_value.toFixed(2)]}),(0,t.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Mean Plots"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Z.plots.mean_bar_plot&&(0,t.jsxs)("div",{className:"border p-2 rounded-md",children:[(0,t.jsx)("h4",{className:"text-md font-medium mb-1",children:"Bar Plot"}),(0,t.jsx)(n.default,{src:`data:image/png;base64,${Z.plots.mean_bar_plot}`,alt:"Bar Plot",width:500,height:300,className:"w-full h-auto"})]}),Z.plots.mean_box_plot&&(0,t.jsxs)("div",{className:"border p-2 rounded-md",children:[(0,t.jsx)("h4",{className:"text-md font-medium mb-1",children:"Box Plot"}),(0,t.jsx)(n.default,{src:`data:image/png;base64,${Z.plots.mean_box_plot}`,alt:"Box Plot",width:500,height:300,className:"w-full h-auto"})]})]})]})]}),Z&&(0,t.jsxs)(o.Zp,{className:"mb-8 border border-blue-200 rounded-lg",children:[(0,t.jsx)(o.aR,{children:(0,t.jsx)(o.ZB,{children:"AI-Powered Summary"})}),(0,t.jsxs)(o.Wu,{children:[(0,t.jsxs)(d.$,{onClick:eu,disabled:A,children:[(0,t.jsx)(x.A,{className:"h-4 w-4 mr-2"}),A?"Generating Summary...":"Generate AI Summary"]}),R&&(0,t.jsx)("div",{className:"text-red-600 text-sm bg-red-50 p-3 rounded mt-4",children:R}),k&&(0,t.jsx)("div",{className:"prose prose-sm max-w-none mt-4",dangerouslySetInnerHTML:{__html:k.replace(/\n/g,"<br />")}})]}),(0,t.jsx)(o.Wu,{children:(0,t.jsx)(d.$,{disabled:!0,children:"Generate Report"})})]})]})})}},7629:(e,s,r)=>{"use strict";r.d(s,{A:()=>t});let t=(0,r(2614).A)("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},7706:e=>{"use strict";e.exports=import("genkit/logging")},7830:e=>{"use strict";e.exports=require("node:stream/web")},7975:e=>{"use strict";e.exports=require("node:util")},9021:e=>{"use strict";e.exports=require("fs")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9196:(e,s,r)=>{"use strict";r.d(s,{A:()=>t});let t=(0,r(2614).A)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9428:e=>{"use strict";e.exports=require("buffer")},9569:(e,s,r)=>{Promise.resolve().then(r.bind(r,2579))},9771:e=>{"use strict";e.exports=require("process")}};var s=require("../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[814,707,183,985,621],()=>r(4209));module.exports=t})();